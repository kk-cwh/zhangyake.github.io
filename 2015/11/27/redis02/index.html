<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="天空之城,zhangykvip@126.com"><title>redis命令学习(二) · THIS SPACE</title><meta name="description" content="列表(Lists)操作命令　　Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素导列表的头部（左边）或者尾部（右边）LPUSH命令插入一个新的元素导头部,而RPUSH插入一个新元素导尾部.当一个这两个操作在一个空的Key上被执行的时候一个新的列表被创建。相似的，如果一个列表操作清"><meta name="keywords" content="Hexo,HTML,CSS,php,Python,Node.js"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.gif" style="width:127px; border-radius: 100px;"><h3 title=""><a href="/">THIS SPACE</a></h3><div class="description"><p>live a good life.</p></div></div></div><ul class="social-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="http://weibo.com/http://weibo.com/jaakzh"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/https://github.com/zhangyake/"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=0 height=0 src="//music.163.com/outchain/player?type=2&id=410042763&auto=1&height=66"></iframe></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>redis命令学习(二)</a></h3></div><div class="post-content"><h4 id="列表-Lists-操作命令"><a href="#列表-Lists-操作命令" class="headerlink" title="列表(Lists)操作命令"></a>列表(Lists)操作命令</h4><p>　　Redis列表是简单的字符串列表，按照插入顺序排序。<br><a id="more"></a><br>你可以添加一个元素导列表的头部（左边）或者尾部（右边）LPUSH命令插入一个新的元素导头部,而RPUSH插入一个新元素导尾部.当一个这两个操作在一个空的Key上被执行的时候一个新的列表被创建。相似的，如果一个列表操作清空一个列表那么对应的key将被从key空间删除。这是非常方便的语义，因为他们被调用使用一个空列表完全就像他们被调用时使用一个不存在的键值（可以）做为参数</p>
<h4 id="LPUSH命令-添加元素"><a href="#LPUSH命令-添加元素" class="headerlink" title="LPUSH命令 - 添加元素"></a>LPUSH命令 - 添加元素</h4><p>LPUSH的作用是将一个或多个值 value 插入到列表 key 的<strong>表头</strong><br>基本语法：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LPUSH <span class="built_in">key</span> <span class="built_in">value</span> [<span class="built_in">value</span> ...]</div></pre></td></tr></table></figure></p>
<p>示例：将java添加到语言列表。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LPUSH</span> <span class="selector-tag">languages</span> "<span class="selector-tag">java</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 1</div></pre></td></tr></table></figure></p>
<p>如果有多个 value 值，那么各个 value 值按从左到右的顺序依次插入到表头,比如说，对空列表 mylist 执行命令 LPUSH mylist a b c ，列表的值将是 c b a 。<br>如果 key 不存在，一个空列表会被创建并执行LPUSH操作。<br>执行成功时，返回列表长度，当 key 存在但不是列表类型时，返回一个错误。</p>
<h4 id="LSET命令-设置指定位置元素"><a href="#LSET命令-设置指定位置元素" class="headerlink" title="LSET命令 - 设置指定位置元素"></a>LSET命令 - 设置指定位置元素</h4><p>LSET可以将列表 key 下标为index的元素的值设置为 value<br>基本语法：<br><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LSET key <span class="built_in">index</span> <span class="built_in">value</span></div></pre></td></tr></table></figure></p>
<p>示例<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LSET</span> <span class="selector-tag">languages</span> 0 "<span class="selector-tag">nodejs</span>"</div><div class="line"><span class="selector-tag">OK</span></div></pre></td></tr></table></figure></p>
<p>需要注意的是，列表 key 必须是已存在的，而且index不能超出列表长度范围。</p>
<h4 id="LINDEX命令-获取指定位置元素"><a href="#LINDEX命令-获取指定位置元素" class="headerlink" title="LINDEX命令 - 获取指定位置元素"></a>LINDEX命令 - 获取指定位置元素</h4><p>如果要获取列表元素，LINDEX命令是比较常用的，使用LINDEX，我们可以获取到指定位置的 value<br>基本语法：<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LINDEX key <span class="keyword">index</span></div></pre></td></tr></table></figure></p>
<p>示例 - 获取languages的第一个元素。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LINDEX</span> <span class="selector-tag">languages</span> 0</div><div class="line">"<span class="selector-tag">nodejs</span>"</div></pre></td></tr></table></figure></p>
<p>下标 (index)为正数时，0表示第一个元素，1表示第二个元素，以此类推。<br>下标 可以是负数，以 -1 表示列表的最后一个元素， -2 表示列表的倒数第二个元素，以此类推。</p>
<h4 id="LPOP命令-取出元素"><a href="#LPOP命令-取出元素" class="headerlink" title="LPOP命令 - 取出元素"></a>LPOP命令 - 取出元素</h4><p>LPOP命令执行时会移除列表第一个元素，并将其返回<br>基本语法：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">LPOP key</span></div></pre></td></tr></table></figure></p>
<p>示例 - 取出languages中的第一个元素。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LPOP</span> <span class="selector-tag">languages</span></div><div class="line">"<span class="selector-tag">nodejs</span>"</div></pre></td></tr></table></figure></p>
<p>请注意，LPOP命令会移除列表中的元素，如果仅仅是想要获取该元素，那么就不应该使用LPOP操作，因为redis中有专门获取元素的命令。</p>
<h4 id="LINSERT命令-插入元素"><a href="#LINSERT命令-插入元素" class="headerlink" title="LINSERT命令 - 插入元素"></a>LINSERT命令 - 插入元素</h4><p>插入元素是一个必要功能，LINSERT可以将值 value 插入到列表 key 当中，位于值 pivot 之前或之后<br>基本语法：<br>LINSERT key BEFORE|AFTER pivot value<br>示例 - 将node插入到JS之前。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LPUSH</span> <span class="selector-tag">languages</span> "<span class="selector-tag">java</span>" "<span class="selector-tag">JS</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 2</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LINSERT</span> <span class="selector-tag">languages</span> <span class="selector-tag">BEFORE</span> "<span class="selector-tag">JS</span>" "<span class="selector-tag">node</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 3</div></pre></td></tr></table></figure></p>
<p>当 pivot 不存在于列表 key 时，不执行任何操作。<br>当 key 不存在时， key 被视为空列表，不执行任何操作。<br>如果 key 不是列表类型，返回一个错误。</p>
<h4 id="LREM命令-移除元素"><a href="#LREM命令-移除元素" class="headerlink" title="LREM命令 - 移除元素"></a>LREM命令 - 移除元素</h4><p>在redis中，移除列表元素使用LREM命令，根据参数 count 的值，移除列表中与参数 value 相等的元素<br>基本语法：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LREM <span class="built_in">key</span> <span class="built_in">count</span> <span class="built_in">value</span></div></pre></td></tr></table></figure></p>
<p>示例 - 移除languages中，所有的名叫‘JS’的元素。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">LREM</span> <span class="selector-tag">languages</span> 0 "<span class="selector-tag">JS</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 1</div></pre></td></tr></table></figure></p>
<p>count 的值可以是以下几种：<br>count &gt; 0 : 从表头开始向表尾搜索，移除与 value 相等的元素，数量为 count 。<br>count &lt; 0 : 从表尾开始向表头搜索，移除与 value 相等的元素，数量为 count 的绝对值。<br>count = 0 : 移除表中所有与 value 相等的值。</p>
<h4 id="LEN命令-列表长度"><a href="#LEN命令-列表长度" class="headerlink" title="LEN命令 - 列表长度"></a>LEN命令 - 列表长度</h4><p>在redis中，LLEN命令可以获取到列表的长度，基本语法：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">LLEN key</span></div></pre></td></tr></table></figure></p>
<p>示例 - 查看languages列表长度。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LLEN</span> <span class="selector-tag">languages</span></div><div class="line">(<span class="selector-tag">integer</span>) 2</div></pre></td></tr></table></figure></p>
<p>返回列表 key 的长度。<br>如果 key 不存在，则 key 被解释为一个空列表，返回 0 。<br>如果 key 不是列表类型，返回一个错误。</p>
<h4 id="LTRIM命令-剪切列表"><a href="#LTRIM命令-剪切列表" class="headerlink" title="LTRIM命令 - 剪切列表"></a>LTRIM命令 - 剪切列表</h4><p>LTRIM可以对一个列表进行修剪，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除<br>基本语法：<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LTRIM key <span class="literal">start</span> <span class="literal">stop</span></div></pre></td></tr></table></figure></p>
<p>示例 - 只保留列表 languages 的前2个元素，其余元素全部删除。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">LTRIM</span> <span class="selector-tag">languages</span> 0 1</div><div class="line"><span class="selector-tag">OK</span></div></pre></td></tr></table></figure></p>
<p>下标(index)参数start和stop都以 0 为底，也就是说，以 0 表示列表的第一个元素，以 1 表示列表的第二个元素，以此类推。<br>你也可以使用负数下标，以 -1 表示列表的最后一个元素， -2 表示列表的倒数第二个元素，以此类推。</p>
<h3 id="集合-Set-操作命令"><a href="#集合-Set-操作命令" class="headerlink" title="集合(Set)操作命令"></a>集合(Set)操作命令</h3><p>Redis 集合（Set）是一个无序的字符串集合. 。Redis 集合拥有令人满意的不允许包含相同成员的属性。多次添加相同的元素，最终在集合里只会有一个元素。 实际上说这些就是意味着在添加元素的时候无须检测元素是否存在。 一个Redis集合的非常有趣的事情是他支持一些服务端的命令从现有的集合出发去进行集合运算，因此你可以在非常短的时间内进行合并（unions）, 求交集（intersections）,求差集（differences of sets）。</p>
<h4 id="SADD命令-添加"><a href="#SADD命令-添加" class="headerlink" title="SADD命令 - 添加"></a>SADD命令 - 添加</h4><p>集合操作中，SADD命令可以将一个或多个 member 元素加入到集合 key 当中，已经存在于集合的 member 元素将被忽略<br>基本语法：<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SADD <span class="built_in">key</span> <span class="built_in">member</span> [<span class="built_in">member</span> ...]</div></pre></td></tr></table></figure></p>
<p>示例 - 添加‘Tom’到room集合中。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SADD</span> <span class="selector-tag">room</span> "<span class="selector-tag">Tom</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 1</div></pre></td></tr></table></figure></p>
<p>假如 key 不存在，则创建一个只包含 member 元素作成员的集合。<br>当 key 不是集合类型时，返回一个错误。</p>
<h4 id="SPOP命令-随机取出"><a href="#SPOP命令-随机取出" class="headerlink" title="SPOP命令 - 随机取出"></a>SPOP命令 - 随机取出</h4><p>如果我们需要随机取出集合中的某个元素，可以使用SPOP命令<br>基本语法：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">SPOP key</span></div></pre></td></tr></table></figure></p>
<p>示例:随机取出room集合中的元素。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SPOP</span> <span class="selector-tag">room</span></div><div class="line">"<span class="selector-tag">Tom</span>"</div></pre></td></tr></table></figure></p>
<p>需要注意的是，执行SPOP命令返回的元素将被<strong>移除</strong>该集合。</p>
<h4 id="SMEMBERS命令-获取全部元素"><a href="#SMEMBERS命令-获取全部元素" class="headerlink" title="SMEMBERS命令 - 获取全部元素"></a>SMEMBERS命令 - 获取全部元素</h4><p>如果要获取集合中全部的元素，则需要使用SMEMBERS命令<br>基本语法：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">SMEMBERS key</span></div></pre></td></tr></table></figure></p>
<p>示例 - 获取room集合中全部的元素。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room</span></div><div class="line">(<span class="selector-tag">empty</span> <span class="selector-tag">list</span> <span class="selector-tag">or</span> <span class="selector-tag">set</span>)</div></pre></td></tr></table></figure></p>
<p>SMEMBERS命令只会返回集合中的全部成员，并不会移除它们，如果集合不存在，则视为空集合。</p>
<h4 id="SCARD命令-元素数量"><a href="#SCARD命令-元素数量" class="headerlink" title="SCARD命令 - 元素数量"></a>SCARD命令 - 元素数量</h4><p>如果想要查看集合中元素的数量，可以使用SCARD命令<br>基本语法：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">SCARD key</span></div></pre></td></tr></table></figure></p>
<p>示例 - 查看room集合中元素的数量。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SCARD</span> <span class="selector-tag">room</span></div><div class="line">(<span class="selector-tag">integer</span>) 0</div></pre></td></tr></table></figure></p>
<p>执行SCARD命令，当集合存在时，返回集合中元素的数量，若集合不存在，则返回0。</p>
<h4 id="SDIFF命令-差集"><a href="#SDIFF命令-差集" class="headerlink" title="SDIFF命令 - 差集"></a>SDIFF命令 - 差集</h4><p>假如现在有两个集合，我们想要获取到它们之间不同的元素，通常情况下，我们需要通过循环集合来比较，然后取得不同的元素。<br>在redis里面取得集合的差集非常简单，通过SDIFF命令即可轻松实现<br>基本语法：<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SDIFF <span class="built_in">key</span> [<span class="built_in">key</span> ...]</div></pre></td></tr></table></figure></p>
<p>示例 - 取得room1和room2的差集。<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0.</span><span class="number">0.1</span>:<span class="number">6379</span>&gt; SADD roo<span class="name">m1</span> <span class="string">"Tom"</span> <span class="string">"Jack"</span> </div><div class="line"><span class="comment">(integer)</span> <span class="number">2</span></div><div class="line"><span class="number">127.0.</span><span class="number">0.1</span>:<span class="number">6379</span>&gt; SADD roo<span class="name">m2</span> <span class="string">"jaakzhang"</span> <span class="string">"Tom"</span></div><div class="line"><span class="comment">(integer)</span> <span class="number">2</span></div><div class="line"><span class="number">127.0.</span><span class="number">0.1</span>:<span class="number">6379</span>&gt; SDIFF roo<span class="name">m1</span> roo<span class="name">m2</span> </div><div class="line"><span class="attr">#这里room1</span>在前 返回的结果以roo<span class="name">m1</span>为主体 从roo<span class="name">m1</span>中去掉roo<span class="name">m2</span>中相同的元素</div><div class="line"><span class="number">1</span>) <span class="string">"Jack"</span></div><div class="line"><span class="number">127.0.</span><span class="number">0.1</span>:<span class="number">6379</span>&gt; SDIFF roo<span class="name">m2</span> roo<span class="name">m1</span> </div><div class="line"><span class="attr">#这里room2</span>在前 返回的结果以roo<span class="name">m2</span>为主体 从roo<span class="name">m2</span>中去掉roo<span class="name">m1</span>中相同的元素</div><div class="line"><span class="number">1</span>) <span class="string">"jaakzhang"</span></div></pre></td></tr></table></figure></p>
<p>如果 key 都存在，则返回一个集合的全部成员，该集合是所有给定集合之间的差集。<br>不存在的 key 被视为空集。</p>
<h4 id="SINTER命令-交集"><a href="#SINTER命令-交集" class="headerlink" title="SINTER命令 - 交集"></a>SINTER命令 - 交集</h4><p>在 redis 中获取集合的交集也是非常简单的，执行SINTER命令将返回集合的交集<br>基本语法：<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SINTER <span class="built_in">key</span> [<span class="built_in">key</span> ...]</div></pre></td></tr></table></figure></p>
<p>示例 - 获取集合room1和room2的交集。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room1</span></div><div class="line">1) "<span class="selector-tag">Jack</span>"</div><div class="line">2) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room2</span></div><div class="line">1) "<span class="selector-tag">jaakzhang</span>"</div><div class="line">2) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SINTER</span> <span class="selector-tag">room1</span> <span class="selector-tag">room2</span></div><div class="line">1) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SINTER</span> <span class="selector-tag">room2</span> <span class="selector-tag">room1</span></div><div class="line">1) "<span class="selector-tag">Tom</span>"</div></pre></td></tr></table></figure></p>
<p>当集合都存在时，将返回一个集合的全部成员，该集合是所有给定集合的交集。<br>不存在的集合被视为空集。因此，当给定集合当中有一个空集时，结果也为空集(根据集合运算定律)。</p>
<h4 id="SUNION命令-并集"><a href="#SUNION命令-并集" class="headerlink" title="SUNION命令 - 并集"></a>SUNION命令 - 并集</h4><p>既然有差集和交集运算，当然少不了并集，在 redis 中，执行SUNION命令将返回给定集合的并集<br>基本语法：<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SUNION <span class="built_in">key</span> [<span class="built_in">key</span> ...]</div></pre></td></tr></table></figure></p>
<p>示例：获取集合room1和room2的并集。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">127.0.0.1:6379&gt;</span>  SMEMBERS room1</div><div class="line"><span class="number">1</span>) <span class="string">"Jack"</span></div><div class="line"><span class="number">2</span>) <span class="string">"Tom"</span></div><div class="line"><span class="meta">127.0.0.1:6379&gt;</span>  SMEMBERS room2</div><div class="line"><span class="number">1</span>) <span class="string">"jaakzhang"</span></div><div class="line"><span class="number">2</span>) <span class="string">"Tom"</span></div><div class="line"><span class="meta">127.0.0.1:6379&gt;</span> SUNION room1 room2</div><div class="line"><span class="number">1</span>) <span class="string">"jaakzhang"</span></div><div class="line"><span class="number">2</span>) <span class="string">"Jack"</span></div><div class="line"><span class="number">3</span>) <span class="string">"Tom"</span></div></pre></td></tr></table></figure></p>
<p>如果给定的集合都存在，则返回一个集合的全部成员，该集合是所有给定集合的并集。<br>同样，不存在的集合被视为空集。</p>
<h4 id="SISMEMBER命令-包含判断"><a href="#SISMEMBER命令-包含判断" class="headerlink" title="SISMEMBER命令 - 包含判断"></a>SISMEMBER命令 - 包含判断</h4><p>如果要判断集合是否包含某个元素也不需要循环对比了，因为 redis 提供SISMEMBER命令可以实现这个功能<br>基本语法：<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SISMEMBER <span class="built_in">key</span> <span class="built_in">member</span></div></pre></td></tr></table></figure></p>
<p>示例 - 判断 Tom 元素是否集合 room1 的成员。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room1</span></div><div class="line">1) "<span class="selector-tag">Jack</span>"</div><div class="line">2) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SISMEMBER</span> <span class="selector-tag">room1</span> "<span class="selector-tag">Tom</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 1</div></pre></td></tr></table></figure></p>
<p>如果集合包含给定的元素，则返回1，反之则返回0。</p>
<h4 id="SMOVE命令-移动元素"><a href="#SMOVE命令-移动元素" class="headerlink" title="SMOVE命令 - 移动元素"></a>SMOVE命令 - 移动元素</h4><p>执行SMOVE可以移动元素<br>基本语法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SMOVE <span class="built_in">source</span> destination member</div></pre></td></tr></table></figure></p>
<p>将 member 元素从 source 集合移动到 destination 集合。SMOVE是原子性操作，因此可以保证数据的一致性。</p>
<p>示例 - 将room1集合中的‘Jack’移动到‘room2’集合。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room1</span></div><div class="line">1) "<span class="selector-tag">Jack</span>"</div><div class="line">2) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room2</span></div><div class="line">1) "<span class="selector-tag">jaakzhang</span>"</div><div class="line">2) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SMOVE</span> <span class="selector-tag">room1</span> <span class="selector-tag">room2</span> "<span class="selector-tag">Jack</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 1</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room2</span></div><div class="line">1) "<span class="selector-tag">Jack</span>"</div><div class="line">2) "<span class="selector-tag">jaakzhang</span>"</div><div class="line">3) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt;  <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room1</span></div><div class="line">1) "<span class="selector-tag">Tom</span>"</div></pre></td></tr></table></figure></p>
<p>如果 source 集合不存在或不包含指定的 member 元素，则SMOVE命令不执行任何操作，仅返回 0 。否则， member 元素从 source 集合中被移除，并添加到 destination 集合中去。<br>当 destination 集合已经包含 member 元素时，SMOVE命令只是简单地将 source 集合中的 member 元素删除。<br>当 source 或 destination 不是集合类型时，返回一个错误。</p>
<h4 id="SREM命令-移除元素"><a href="#SREM命令-移除元素" class="headerlink" title="SREM命令 - 移除元素"></a>SREM命令 - 移除元素</h4><p>执行命令SREM可以将元素从集合中移除<br>基本语法：<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SREM <span class="built_in">key</span> <span class="built_in">member</span> [<span class="built_in">member</span> ...]</div></pre></td></tr></table></figure></p>
<p>示例 - 从room1集合中移除”Tom”</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room1</span></div><div class="line">1) "<span class="selector-tag">Tom</span>"</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SREM</span> <span class="selector-tag">room1</span> "<span class="selector-tag">Tom</span>"</div><div class="line">(<span class="selector-tag">integer</span>) 1</div><div class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">SMEMBERS</span> <span class="selector-tag">room1</span></div><div class="line">(<span class="selector-tag">empty</span> <span class="selector-tag">list</span> <span class="selector-tag">or</span> <span class="selector-tag">set</span>)</div></pre></td></tr></table></figure>
<p>移除集合 key 中的一个或多个 member 元素，不存在的 member 元素会被忽略。<br>当 key 不是集合类型，返回一个错误。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2015-11-27</span><i class="fa fa-tag"></i><a href="/categories/数据库/" title="数据库" class="tag">数据库 </a><a href="/tags/redis/" title="redis" class="tag">redis </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://zhangyake.github.io/2015/11/27/redis02/,THIS SPACE,redis命令学习(二),;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2015/11/28/redis03/" title="redis命令学习(三)" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2015/11/24/redis01/" title="redis 命令学习(一)" class="btn">下一篇</a></li></ul></div><a id="comments"></a><div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div><script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script><script>var cloudTieConfig = { url: document.location.href, sourceId: '2015/11/27/redis02/', productKey: 'zhangykvip@126.com', target: 'cloud-tie-wrapper' };var yunManualLoad = true;Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>